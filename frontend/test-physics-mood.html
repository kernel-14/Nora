<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç‰©ç†å¼•æ“å¿ƒæƒ…æ°”æ³¡æµ‹è¯•</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #f5f3ff 0%, #fce7f3 100%);
      min-height: 100vh;
    }
    
    .container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    h1 {
      text-align: center;
      color: #6b21a8;
      margin-bottom: 10px;
    }
    
    .subtitle {
      text-align: center;
      color: #9333ea;
      margin-bottom: 30px;
      font-size: 14px;
    }
    
    .canvas-container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      position: relative;
    }
    
    canvas {
      display: block;
      cursor: pointer;
    }
    
    .info {
      margin-top: 20px;
      padding: 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }
    
    .info h3 {
      margin-top: 0;
      color: #6b21a8;
    }
    
    .info ul {
      margin: 10px 0;
      padding-left: 20px;
    }
    
    .info li {
      margin: 8px 0;
      color: #64748b;
    }
    
    .mood-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 10px;
      margin-top: 20px;
    }
    
    .mood-item {
      padding: 12px;
      background: linear-gradient(135deg, #f3e8ff 0%, #fce7f3 100%);
      border-radius: 8px;
      font-size: 12px;
      text-align: center;
    }
    
    .mood-type {
      font-weight: 600;
      color: #6b21a8;
      margin-bottom: 4px;
    }
    
    .mood-intensity {
      color: #9333ea;
      font-size: 11px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ«§ ç‰©ç†å¼•æ“å¿ƒæƒ…æ°”æ³¡æ± </h1>
    <p class="subtitle">åŸºäº Matter.js çš„åŠ¨æ€æ°”æ³¡äº¤äº’æ¼”ç¤º</p>
    
    <div class="canvas-container">
      <canvas id="moodCanvas"></canvas>
    </div>
    
    <div class="info">
      <h3>âœ¨ åŠŸèƒ½ç‰¹æ€§</h3>
      <ul>
        <li>ğŸ¨ <strong>é¢œè‰²æ˜ å°„</strong>ï¼šä¸åŒå¿ƒæƒ…ç±»å‹å¯¹åº”ä¸åŒé¢œè‰²ï¼ˆå–œæ‚¦-æ©™è‰²ã€ç„¦è™‘-ç´«è‰²ã€å¹³é™-è“è‰²ç­‰ï¼‰</li>
        <li>ğŸ“ <strong>å¤§å°æ˜ å°„</strong>ï¼šæ°”æ³¡å¤§å°ç”±æƒ…ç»ªå¼ºåº¦ï¼ˆ1-10ï¼‰å†³å®š</li>
        <li>ğŸ’« <strong>ç‰©ç†ç¢°æ’</strong>ï¼šæ°”æ³¡ä¹‹é—´çœŸå®çš„ç‰©ç†åå¼¹æ•ˆæœ</li>
        <li>ğŸ–±ï¸ <strong>æ‹–æ‹½äº¤äº’</strong>ï¼šå¯ä»¥æ‹–åŠ¨æ°”æ³¡ï¼Œæ„Ÿå—ç‰©ç†å¼•æ“</li>
        <li>ğŸ‘† <strong>ç‚¹å‡»æŸ¥çœ‹</strong>ï¼šç‚¹å‡»æ°”æ³¡æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯</li>
        <li>ğŸŒŠ <strong>å¸ƒæœ—è¿åŠ¨</strong>ï¼šè½»å¾®çš„éšæœºæ‰°åŠ¨ï¼Œæ¨¡æ‹Ÿè‡ªç„¶æ¼‚æµ®</li>
        <li>âœ¨ <strong>å…‰æ™•æ•ˆæœ</strong>ï¼šåŠé€æ˜æ¸å˜ï¼Œæ¯›ç»ç’ƒè´¨æ„Ÿ</li>
      </ul>
      
      <h3>ğŸ“Š å½“å‰å¿ƒæƒ…æ•°æ®</h3>
      <div class="mood-list" id="moodList"></div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.20.0/matter.min.js"></script>
  <script>
    // æ¨¡æ‹Ÿå¿ƒæƒ…æ•°æ®
    const mockMoods = [
      { id: '1', type: 'å–œæ‚¦', intensity: 9, timestamp: new Date().toISOString(), keywords: ['å¼€å¿ƒ', 'æ»¡è¶³'] },
      { id: '2', type: 'ç„¦è™‘', intensity: 7, timestamp: new Date().toISOString(), keywords: ['å‹åŠ›', 'æ‹…å¿ƒ'] },
      { id: '3', type: 'å¹³é™', intensity: 6, timestamp: new Date().toISOString(), keywords: ['æ”¾æ¾', 'å®‰å®'] },
      { id: '4', type: 'å…´å¥‹', intensity: 8, timestamp: new Date().toISOString(), keywords: ['æ¿€åŠ¨', 'æœŸå¾…'] },
      { id: '5', type: 'æ‚²ä¼¤', intensity: 5, timestamp: new Date().toISOString(), keywords: ['éš¾è¿‡', 'å¤±è½'] },
      { id: '6', type: 'ç–²æƒ«', intensity: 4, timestamp: new Date().toISOString(), keywords: ['ç´¯', 'å›°'] },
      { id: '7', type: 'å¼€å¿ƒ', intensity: 8, timestamp: new Date().toISOString(), keywords: ['æ„‰å¿«', 'è½»æ¾'] },
      { id: '8', type: 'æ”¾æ¾', intensity: 7, timestamp: new Date().toISOString(), keywords: ['èˆ’é€‚', 'è‡ªåœ¨'] },
    ];

    // é¢œè‰²æ˜ å°„
    const getMoodColor = (type) => {
      const colorMap = {
        'å–œæ‚¦': { fill: '#FED7AA', stroke: '#FB923C', glow: 'rgba(251, 146, 60, 0.4)' },
        'å¼€å¿ƒ': { fill: '#FECACA', stroke: '#FB7185', glow: 'rgba(251, 113, 133, 0.4)' },
        'å…´å¥‹': { fill: '#FEF08A', stroke: '#FACC15', glow: 'rgba(250, 204, 21, 0.4)' },
        'å¹³é™': { fill: '#BFDBFE', stroke: '#60A5FA', glow: 'rgba(96, 165, 250, 0.4)' },
        'æ”¾æ¾': { fill: '#D9F99D', stroke: '#84CC16', glow: 'rgba(132, 204, 22, 0.4)' },
        'ç„¦è™‘': { fill: '#DDD6FE', stroke: '#A78BFA', glow: 'rgba(167, 139, 250, 0.4)' },
        'æ‚²ä¼¤': { fill: '#CBD5E1', stroke: '#64748B', glow: 'rgba(100, 116, 139, 0.4)' },
        'ç–²æƒ«': { fill: '#E0E7FF', stroke: '#818CF8', glow: 'rgba(129, 140, 248, 0.4)' },
      };
      return colorMap[type] || { fill: '#E2E8F0', stroke: '#94A3B8', glow: 'rgba(148, 163, 184, 0.4)' };
    };

    // åˆå§‹åŒ–ç”»å¸ƒ
    const canvas = document.getElementById('moodCanvas');
    const width = 800;
    const height = 600;
    canvas.width = width;
    canvas.height = height;

    // åˆ›å»ºç‰©ç†å¼•æ“
    const engine = Matter.Engine.create({
      gravity: { x: 0, y: 0.05, scale: 0.001 }
    });

    const render = Matter.Render.create({
      canvas: canvas,
      engine: engine,
      options: {
        width: width,
        height: height,
        wireframes: false,
        background: 'transparent'
      }
    });

    // åˆ›å»ºè¾¹ç•Œ
    const wallThickness = 50;
    const walls = [
      Matter.Bodies.rectangle(width / 2, -wallThickness / 2, width, wallThickness, { isStatic: true, render: { visible: false } }),
      Matter.Bodies.rectangle(width / 2, height + wallThickness / 2, width, wallThickness, { isStatic: true, render: { visible: false } }),
      Matter.Bodies.rectangle(-wallThickness / 2, height / 2, wallThickness, height, { isStatic: true, render: { visible: false } }),
      Matter.Bodies.rectangle(width + wallThickness / 2, height / 2, wallThickness, height, { isStatic: true, render: { visible: false } })
    ];
    Matter.World.add(engine.world, walls);

    // åˆ›å»ºæ°”æ³¡
    const bodies = mockMoods.map((mood, index) => {
      const radius = 25 + (mood.intensity / 10) * 35;
      const angle = (index / mockMoods.length) * Math.PI * 2;
      const distance = Math.min(width, height) * 0.2;
      const x = width / 2 + Math.cos(angle) * distance;
      const y = height / 2 + Math.sin(angle) * distance;
      const colors = getMoodColor(mood.type);

      const body = Matter.Bodies.circle(x, y, radius, {
        restitution: 0.6,
        friction: 0.01,
        frictionAir: 0.02,
        density: 0.001,
        render: {
          fillStyle: colors.fill,
          strokeStyle: colors.stroke,
          lineWidth: 2
        },
        label: mood.id
      });

      Matter.Body.setVelocity(body, {
        x: (Math.random() - 0.5) * 2,
        y: (Math.random() - 0.5) * 2
      });

      return { body, mood };
    });

    Matter.World.add(engine.world, bodies.map(b => b.body));

    // é¼ æ ‡äº¤äº’
    const mouse = Matter.Mouse.create(canvas);
    const mouseConstraint = Matter.MouseConstraint.create(engine, {
      mouse: mouse,
      constraint: {
        stiffness: 0.2,
        render: { visible: false }
      }
    });
    Matter.World.add(engine.world, mouseConstraint);

    // ç‚¹å‡»äº‹ä»¶
    Matter.Events.on(mouseConstraint, 'mousedown', (event) => {
      const mousePosition = event.mouse.position;
      const clickedBody = Matter.Query.point(bodies.map(b => b.body), mousePosition)[0];
      
      if (clickedBody) {
        const moodData = bodies.find(b => b.body === clickedBody);
        if (moodData) {
          alert(`å¿ƒæƒ…: ${moodData.mood.type}\nå¼ºåº¦: ${moodData.mood.intensity}/10\nå…³é”®è¯: ${moodData.mood.keywords.join(', ')}`);
        }
      }
    });

    // è‡ªå®šä¹‰æ¸²æŸ“
    Matter.Events.on(render, 'afterRender', () => {
      const context = render.context;
      
      bodies.forEach(({ body, mood }) => {
        const { position } = body;
        const radius = body.circleRadius;
        const colors = getMoodColor(mood.type);

        // å…‰æ™•
        context.save();
        context.globalAlpha = 0.3;
        const gradient = context.createRadialGradient(
          position.x, position.y, radius * 0.5,
          position.x, position.y, radius * 1.5
        );
        gradient.addColorStop(0, colors.glow);
        gradient.addColorStop(1, 'transparent');
        context.fillStyle = gradient;
        context.beginPath();
        context.arc(position.x, position.y, radius * 1.5, 0, Math.PI * 2);
        context.fill();
        context.restore();

        // é«˜å…‰
        context.save();
        context.globalAlpha = 0.5;
        context.fillStyle = 'rgba(255, 255, 255, 0.6)';
        context.beginPath();
        context.arc(
          position.x - radius * 0.3,
          position.y - radius * 0.3,
          radius * 0.25,
          0,
          Math.PI * 2
        );
        context.fill();
        context.restore();

        // æ–‡å­—
        context.save();
        context.fillStyle = '#334155';
        context.font = `${Math.max(12, radius * 0.35)}px sans-serif`;
        context.textAlign = 'center';
        context.textBaseline = 'middle';
        context.fillText(mood.type, position.x, position.y);
        context.restore();
      });
    });

    // å¸ƒæœ—è¿åŠ¨
    setInterval(() => {
      bodies.forEach(({ body }) => {
        Matter.Body.applyForce(body, body.position, {
          x: (Math.random() - 0.5) * 0.0001,
          y: (Math.random() - 0.5) * 0.0001
        });
      });
    }, 100);

    // å¯åŠ¨
    Matter.Runner.run(engine);
    Matter.Render.run(render);

    // æ˜¾ç¤ºå¿ƒæƒ…åˆ—è¡¨
    const moodList = document.getElementById('moodList');
    mockMoods.forEach(mood => {
      const div = document.createElement('div');
      div.className = 'mood-item';
      div.innerHTML = `
        <div class="mood-type">${mood.type}</div>
        <div class="mood-intensity">å¼ºåº¦: ${mood.intensity}/10</div>
      `;
      moodList.appendChild(div);
    });
  </script>
</body>
</html>
