# 心情气泡池 - 快速开始

## 🚀 立即体验

### 方法 1: 独立测试页面（推荐）

最快的方式是直接打开测试页面：

```bash
# 在浏览器中打开
frontend/test-physics-mood.html
```

这个页面包含：
- ✅ 完整的物理引擎演示
- ✅ 8 个模拟心情气泡
- ✅ 所有交互功能
- ✅ 无需启动后端

### 方法 2: 完整应用

1. **启动后端**
```bash
# 使用启动脚本
启动后端.bat
# 或
启动后端.ps1
```

2. **启动前端**
```bash
# 使用启动脚本
启动前端.bat
# 或
启动前端.ps1
```

3. **访问应用**
- 打开浏览器访问: http://localhost:5173
- 点击顶部的"心情"按钮
- 查看动态气泡池

## 🎮 交互指南

### 基本操作

| 操作 | 效果 |
|------|------|
| 👆 **点击气泡** | 查看心情详情（类型、强度、关键词、时间） |
| 🖱️ **拖动气泡** | 移动气泡，其他气泡会被推开 |
| 👀 **观察碰撞** | 气泡相互碰撞时会真实反弹 |
| 🌊 **自然漂浮** | 气泡会自动进行微小的随机运动 |

### 高级技巧

1. **快速拖动**: 用力拖动气泡后释放，气泡会高速飞出并与其他气泡碰撞
2. **聚集效果**: 将多个气泡拖到一起，观察它们如何相互推开
3. **边界反弹**: 将气泡拖到边缘，观察反弹效果

## 📊 添加心情数据

### 方法 1: 通过首页输入

1. 回到首页
2. 点击麦克风或输入文字
3. 说出或写下包含心情的内容，例如：
   - "今天感觉很焦虑，工作压力好大"
   - "心情很平静，看着窗外的云发呆"
   - "超级开心！项目终于完成了"

4. 系统会自动分析并保存心情
5. 再次打开心情页面，新气泡会出现

### 方法 2: 直接编辑数据文件

编辑 `data/moods.json`:

```json
[
  {
    "record_id": "unique-id-1",
    "timestamp": "2026-01-17T12:00:00Z",
    "type": "喜悦",
    "intensity": 9,
    "keywords": ["开心", "满足", "成就感"]
  },
  {
    "record_id": "unique-id-2",
    "timestamp": "2026-01-17T14:30:00Z",
    "type": "焦虑",
    "intensity": 7,
    "keywords": ["压力", "担心", "紧张"]
  }
]
```

**字段说明**:
- `record_id`: 唯一标识符（任意字符串）
- `timestamp`: ISO 8601 格式的时间戳
- `type`: 心情类型（见下方支持列表）
- `intensity`: 强度值 1-10
- `keywords`: 关键词数组

## 🎨 支持的心情类型

| 类型 | 颜色 | 适用场景 |
|------|------|---------|
| 喜悦 | 🟠 暖橙色 | 成就感、满足、愉悦 |
| 开心 | 🩷 粉红色 | 快乐、轻松、愉快 |
| 兴奋 | 🟡 亮黄色 | 激动、期待、充满活力 |
| 平静 | 🔵 天蓝色 | 宁静、安宁、放松 |
| 放松 | 🟢 青绿色 | 舒适、自在、惬意 |
| 焦虑 | 🟣 淡紫色 | 担心、压力、紧张 |
| 悲伤 | ⚪ 灰蓝色 | 难过、失落、低落 |
| 疲惫 | 🟣 浅紫色 | 累、困、疲倦 |

## 🔧 自定义配置

### 调整物理参数

编辑 `frontend/components/PhysicsMoodBubble.tsx`:

```typescript
// 调整重力（越大气泡下沉越快）
gravity: { x: 0, y: 0.05, scale: 0.001 }

// 调整弹性（0-1，越大越弹）
restitution: 0.6

// 调整摩擦力（越大越快停止）
friction: 0.01

// 调整空气阻力（越大减速越快）
frictionAir: 0.02
```

### 调整气泡大小

```typescript
// 当前公式：25-60px
const radius = 25 + (mood.intensity / 10) * 35;

// 更大的气泡：40-80px
const radius = 40 + (mood.intensity / 10) * 40;

// 更小的气泡：15-40px
const radius = 15 + (mood.intensity / 10) * 25;
```

### 添加新的心情类型

在 `getMoodColor` 函数中添加：

```typescript
'新心情': { 
  fill: '#颜色代码', 
  stroke: '#边框颜色', 
  glow: 'rgba(R, G, B, 0.4)' 
}
```

### 调整显示时间范围

编辑 `frontend/components/MoodView.tsx`:

```typescript
// 当前：最近 7 天
const sevenDaysAgo = Date.now() - 7 * 24 * 60 * 60 * 1000;

// 改为最近 30 天
const thirtyDaysAgo = Date.now() - 30 * 24 * 60 * 60 * 1000;

// 改为最近 24 小时
const oneDayAgo = Date.now() - 24 * 60 * 60 * 1000;
```

## 🐛 故障排查

### 问题：气泡不显示

**可能原因**:
1. 没有心情数据
2. 数据时间超过 7 天
3. 后端未启动

**解决方案**:
```bash
# 1. 检查数据文件
cat data/moods.json

# 2. 检查后端状态
curl http://localhost:8000/health

# 3. 查看浏览器控制台错误
# 按 F12 打开开发者工具
```

### 问题：气泡重叠严重

**解决方案**:
- 减少气泡数量（调整时间范围）
- 增大容器尺寸
- 调整初始位置分布算法

### 问题：动画卡顿

**解决方案**:
1. 减少气泡数量（< 30 个）
2. 降低渲染质量
3. 关闭布朗运动效果

### 问题：气泡飞出屏幕

**检查**:
- 边界墙是否正确创建
- 容器尺寸是否正确计算
- 物理引擎是否正常运行

## 📚 更多资源

- [完整功能说明](./心情气泡池功能说明.md)
- [Matter.js 官方文档](https://brm.io/matter-js/)
- [项目 README](../README.md)

## 💡 使用建议

### 最佳实践

1. **定期记录**: 每天记录 2-3 次心情，保持数据新鲜
2. **详细描述**: 添加关键词，方便回顾
3. **观察趋势**: 定期查看气泡池，了解情绪变化
4. **互动体验**: 多拖动气泡，感受物理引擎的乐趣

### 创意玩法

1. **心情日记**: 每天截图保存气泡池状态
2. **情绪分析**: 观察哪种颜色的气泡最多
3. **压力释放**: 拖动气泡碰撞，释放压力
4. **冥想辅助**: 观察气泡漂浮，放松心情

## 🎉 开始使用

现在就打开 `frontend/test-physics-mood.html` 或启动完整应用，体验动态心情气泡池吧！

有任何问题或建议，欢迎反馈。
